<mat-card>
  <mat-card-header>
    <mat-card-title>{{ pageTitle }}</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="filter-section">
      <mat-form-field appearance="fill">
        <mat-label>Filter by</mat-label>
        <input matInput [(ngModel)]="listFilter">
      </mat-form-field>

      <button mat-raised-button color="primary" (click)="toggleImage()">
        {{ showImage ? 'Hide' : 'Show' }} Image
      </button>
    </div>

    <div *ngIf="listFilter">
      <h4>Filtered by: {{ listFilter }}</h4>
    </div>

    <mat-table [dataSource]="filteredProducts" class="mat-elevation-z8" *ngIf="products.length">

      <!-- Image Column -->
      <ng-container matColumnDef="image">
        <th mat-header-cell *matHeaderCellDef> Image </th>
        <td mat-cell *matCellDef="let product">
          <img *ngIf="showImage" [src]="product.imageUrl" [alt]="product.productName" [style.width.px]="imageWidth + 20" [style.margin.px]="imageMargin + 10">
        </td>
      </ng-container>

      <!-- Product Column -->
      <ng-container matColumnDef="product">
        <th mat-header-cell *matHeaderCellDef> Product </th>
        <td mat-cell *matCellDef="let product">
          <a [routerLink]="['/products', product.productId]">
            {{ product.productName }}
          </a>
        </td>
      </ng-container>

      <!-- Code Column -->
      <ng-container matColumnDef="code">
        <th mat-header-cell *matHeaderCellDef> Code </th>
        <td mat-cell *matCellDef="let product">{{ product.productCode | lowercase | convertToSpaces:'-' }}</td>
      </ng-container>

      <!-- Available Column -->
      <ng-container matColumnDef="available">
        <th mat-header-cell *matHeaderCellDef> Available </th>
        <td mat-cell *matCellDef="let product">{{ product.releaseDate }}</td>
      </ng-container>

      <!-- Price Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Price </th>
        <td mat-cell *matCellDef="let product">{{ product.price | currency:'USD':'symbol':'1.2-2' }}</td>
      </ng-container>

      <!-- Rating Column -->
      <ng-container matColumnDef="rating">
        <th mat-header-cell *matHeaderCellDef> 5 Star Rating </th>
        <td mat-cell *matCellDef="let product">
          <mat-icon color="warn">star</mat-icon>
          <mat-icon color="warn">star</mat-icon>
          <mat-icon color="warn">star</mat-icon>
          <mat-icon color="warn">star</mat-icon>
          <mat-icon color="warn">star</mat-icon>
        </td>
      </ng-container>

      <!-- Define the columns to display -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </mat-table>


  </mat-card-content>
</mat-card>
